<!DOCTYPE html 
    PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>

<!-- Mirrored from kozgun.net/wiki/pmwiki.php?n=PmWiki.FilePermissions by HTTrack Website Copier/3.x [XR&CO'2010], Sat, 26 Jan 2013 19:19:13 GMT -->
<!-- Added by HTTrack -->
<!-- Mirrored from kozgun.net/wiki/pmwiki9df9.html?n=PmWiki.FilePermissions by HTTrack Website Copier/3.x [XR&CO'2013], Fri, 27 Jun 2014 19:52:08 GMT -->
<meta http-equiv="content-type" content="text/html;charset=iso-8859-1" /><!-- /Added by HTTrack -->
<head>
  <title>Wiki | PmWiki / FilePermissions </title>
  <meta http-equiv='Content-Style-Type' content='text/css' />
  <link rel='stylesheet' href='pub/skins/pmwiki/pmwiki.css' type='text/css' />
	<script src="http://www.google-analytics.com/urchin.js" type="text/javascript">
	</script>
	<script type="text/javascript">
		_uacct = "UA-884922-1";
		urchinTracker();
	</script>

  <!--HeaderText--><style type='text/css'><!--
  ul, ol, pre, dl, p { margin-top:0px; margin-bottom:0px; }
  code { white-space: nowrap; }
  .vspace { margin-top:1.33em; }
  .indent { margin-left:40px; }
  .outdent { margin-left:40px; text-indent:-40px; }
  a.createlinktext { text-decoration:none; border-bottom:1px dotted gray; }
  a.createlink { text-decoration:none; position:relative; top:-0.5em;
    font-weight:bold; font-size:smaller; border-bottom:none; }
  img { border:0px; }
  
div.sourceblock {
	padding: 0.5em;
	border: 1px solid #808080;
	background-color: #F1F0ED; }
div.sourceblock div {
	font-family: monospace;
	font-size: small;
	line-height: 1; }
div.sourceblock div.head, div.sourceblock div.foot {
	font: italic medium serif;
	padding: 0.5em;
}
div.codeblock {
	padding: 0.5em;
	border: 1px solid #808080;
	background-color: #F1F0ED; }
div.codeblock pre {
	font-family: monospace;
	font-size: small;
	line-height: 1; }.editconflict { color:green; font-style:italic; 
  margin-top:1.33em; margin-bottom:1.33em; }

  table.markup { border: 2px dotted #ccf; width:90%; }
  td.markup1, td.markup2 { padding-left:10px; padding-right:10px; }
  td.markup1 { border-bottom: 1px solid #ccf; }
  div.faq { margin-left:2em; }
  div.faq p.question { margin: 1em 0 0.75em -2em; font-weight:bold; }
  div.faq hr { margin-left: -2em; }
   
    .frame 
      { border:1px solid #cccccc; padding:4px; background-color:#f9f9f9; }
    .lfloat { float:left; margin-right:0.5em; }
    .rfloat { float:right; margin-left:0.5em; }
a.varlink { text-decoration:none; }

--></style>  <meta name='robots' content='noindex,nofollow' />

</head>
<body>
<!--PageHeaderFmt-->
  <div id='wikilogo'><a href='http://kozgun.net/wiki/pmwiki.php'><img src='http://kozgun.net/wiki/pub/skins/pmwiki/sopar100.jpg'
    alt='Wiki' border='0' /></a></div>
  <div id='wikihead'>
	<!-- <span align=center style="position: relative; top:0px; left:-400px;"> -->
<!-- SiteSearch Google -->
<!--
<form method="get" action="http://www.google.com.tr/custom" target="_top">
<table border="0">
<tr><td nowrap="nowrap" valign="top" align="left" height="32">
<a href="http://www.google.com/">
<img src="http://www.google.com/logos/Logo_25wht.gif" border="0" alt="Google" align="middle"></img></a>
</td>
<td nowrap="nowrap">
<input type="hidden" name="domains" value="linoz.blogspot.com;www.kozgun.net"></input>
<input type="text" name="q" size="20" maxlength="255" value=""></input>
<input type="submit" name="sa" value="Search"></input>
</td></tr>
<tr>
<td nowrap="nowrap" colspan=2>
<table>
<tr>
<td>
<input type="radio" name="sitesearch" value="" checked="checked"></input>
<font size="-1" color="#000000">Web</font>
<input type="radio" name="sitesearch" value="linoz.blogspot.com"></input>
<font size="-1" color="#000000">linoz.blogspot.com</font>
<input type="radio" name="sitesearch" value="www.kozgun.net"></input>
<font size="-1" color="#000000">www.kozgun.net</font>
</td>
  <td></td>
</tr>
</table>
<input type="hidden" name="client" value="pub-0891912819256381"></input>
<input type="hidden" name="forid" value="1"></input>
<input type="hidden" name="ie" value="ISO-8859-9"></input>
<input type="hidden" name="oe" value="ISO-8859-9"></input>
<input type="hidden" name="cof" value="GALT:#008000;GL:1;DIV:#336699;VLC:663399;AH:center;BGC:FFFFFF;LBGC:336699;ALC:0000FF;LC:0000FF;T:000000;GFNT:0000FF;GIMP:0000FF;FORID:1"></input>
<input type="hidden" name="hl" value="en"></input>
</td></tr></table>
</form>
-->
<!-- SiteSearch Google -->
	<!-- </span> -->

	<span style="position: relative; top:0px; left:0px;">
  <form action='http://kozgun.net/wiki/pmwiki.php'>
    <a href='http://kozgun.net/wiki/pmwiki.php?n=PmWiki.RecentChanges'
      accesskey='c'>Recent Changes</a> -
    <input type='hidden' name='n' value='PmWiki.FilePermissions' />
    <input type='hidden' name='action' value='search' />
    <a href='http://kozgun.net/wiki/pmwiki.php?n=Site.Search'>Search</a>:
    <input class='searchbox' type='text' name='q' value='' />
    <input class='searchbutton' type='submit' value='Go' /></form></div>
		</span>

<!--/PageHeaderFmt-->
  <table id='wikimid' width='100%' cellspacing='0' cellpadding='0'><tr>
<!--PageLeftFmt-->
      <td id='wikileft' valign='top'>
        <ul><li><a class='wikilink' href='http://kozgun.net/wiki/pmwiki.php?n=BirlerVeSifirlar.HomePage'>Birler ve S&#305;f&#305;rlar</a>
</li><li><a class='wikilink' href='http://kozgun.net/wiki/pmwiki.php?n=Radio.HomePage'>Radyo</a>
</li><li><a class='wikilink' href='http://kozgun.net/wiki/pmwiki.php?n=Bookmarks.Index'>Ba&#287;lant&#305;lar</a>
</li><li><a class='wikilink' href='http://kozgun.net/wiki/pmwiki.php?n=RSS.HomePage'>RSS/Podcasts</a>
</li><li><a class='wikilink' href='http://kozgun.net/wiki/pmwiki.php?n=Main.Index'>Site Haritas&#305;</a>
</li><li><a class='urllink' href='http://linoz.blogspot.com/' rel='nofollow'>linoz.blogspot.com</a>
</li><li><a class='wikilink' href='http://kozgun.net/wiki/pmwiki.php?n=NelerOgrendim.HomePage'>Neler Ö&#287;rendim</a>
</li></ul><p style='text-align: right;' > <span style='font-size:83%'><a class='wikilink' href='http://kozgun.net/wiki/pmwiki.php?n=Site.SideBar?action=edit'>edit SideBar</a></span>
</p>

			<div align="center">
			<br>
			<!-- firefox ve thunderbird -->
			<a href="http://www.spreadfirefox.com/?q=affiliates&amp;id=0&amp;t=209"><img border="0" alt="Firefox 2" title="Firefox 2" src="http://sfx-images.mozilla.org/affiliates/Buttons/firefox2/firefox-spread-btn-1.png"/></a> 
			<br>
<a href="http://www.spreadfirefox.com/?q=affiliates&amp;id=0&amp;t=181"><img border="0" alt="Get Thunderbird!" title="Get Thunderbird!" src="http://sfx-images.mozilla.org/affiliates/thunderbird/thunderbird_small.png"/></a>


<br><br>
				<script type="text/javascript"><!--
				/*
google_ad_client = "pub-0891912819256381";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_ad_type = "text_image";
google_ad_channel = "";
*/
//-->
</script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>

</div>
				</td>
<!--/PageLeftFmt-->
      <td id='wikibody' valign='top'>
        <!-- <div id='wikicmds'><ul><li class='browse' ><a accesskey='ak_view'  class='selflink' href='http://kozgun.net/wiki/pmwiki.php?n=PmWiki.FilePermissions'>View</a>
</li><li class='edit' ><a accesskey='e'  class='wikilink' href='http://kozgun.net/wiki/pmwiki.php?n=PmWiki.FilePermissions?action=edit'>Edit</a>
</li><li class='diff' ><a accesskey='h'  class='wikilink' href='http://kozgun.net/wiki/pmwiki.php?n=PmWiki.FilePermissions?action=diff'>History</a>
</li><li class='print' ><a accesskey='ak_print'  class='wikilink' href='http://kozgun.net/wiki/pmwiki.php?n=PmWiki.FilePermissions?action=print'>Print</a>
</li></ul>
</div>-->
<!--PageTitleFmt-->
        <div id='wikititle'>
          <div class='pagegroup'><a href='http://kozgun.net/wiki/pmwiki.php?n=PmWiki'>PmWiki</a> /</div>
          <h1 class='pagetitle'>FilePermissions</h1></div>
<!--PageText-->
<div id='wikitext'>
<p>
This page briefly describes <a class='wikilink' href='http://kozgun.net/wiki/pmwiki.php?n=PmWiki.PmWiki'>PmWiki</a>'s settings for file and directory permissions in a typical Unix environment.
</p><p class='vspace'></p>
<p>First, let's look at PmWiki 2 without any cookbook scripts loaded.  PmWiki needs to be able to write into the wiki.d/ directory to be able to save pages.  And it needs to be able to write into the uploads/ directory to save uploads.  Those are the *only* directories that need to be writable by the webserver.  It doesn't matter to PmWiki who owns or creates those directories, as long as it has write permission to them.
</p><p class='vspace'></p>
<p>All other directories should be owned by the account holder, and be accessible by the webserver (but normally not writable by the webserver).       
</p><p class='vspace'></p>
<p>That's it -- everything else depends on the specific PHP configuration and running environment, which is detailed below (and which is why there isn't a definitive answer that applies to every situation).  But the above two rules are absolute and answer 95% of the questions about directory permissions.      
</p><p class='vspace'></p>
<p>In the example of "What ownerships should a pub/css/ directory have?", we simply ask "Does PmWiki need to create files in that directory?"  The answer is "no", so the directory can (should) be owned by the administrator and only have basic read permissions (r-x) to the webserver.  This means PmWiki shouldn't be responsible for creating the directory, because then the webserver would own the directory and not
the administrator.
</p><p class='vspace'></p>
<p>Okay, with that out of the way, here are some configuration specific details.  If someone is on a Unix host, then the webserver typically runs with a userid and groupid that is different from the account holder (e.g, "apache", "www", or "httpd").  Thus, if the account holder creates the wiki.d/ and uploads/ directories, then they must also to set the directories to be world-writable (rwx) permissions in order for PmWiki             (running as the webserver account) to create files there.                       
</p><p class='vspace'></p>
<div class='indent'><pre>
$ pwd
/home/pmichaud/public_html/pmwiki
$ mkdir uploads
$ mkdir wiki.d
$ chmod 777 uploads wiki.d        
$ ls -ld . uploads wiki.d
drwxr-xr-x   12 pmichaud pmichaud     1024 Feb 10 11:51 .         
drwxrwxrwx    8 pmichaud pmichaud     1024 Jan 23 11:58 uploads             
drwxrwxrwx    2 pmichaud pmichaud    54272 Feb 10 15:29 wiki.d      
</pre>
</div><p class='vspace'></p><p>However, lots of people don't like having those world-writable (rwx) permissions on directories.  Thus, one way to get around that is to let the webserver own the directory directly, so that world-writable permissions aren't needed to save files there.  However, most unix systems don't allow normal users to change file ownerships, so the way to get the webserver to own the directories is to let PmWiki create them, by   
temporarily granting write permissions to the parent and then running the pmwiki.php script to create the needed directories:                 
</p><p class='vspace'></p>
<div class='indent'><pre>
$ pwd
/home/pmichaud/public_html/pmwiki
$ chmod 777 .  
$ ls -ld .
drwxrwxrwx   12 pmichaud pmichaud     1024 Feb 10 11:51 .
# &lt;-- execute pmwiki.php script from web browser --&gt;
$ ls -ld . uploads wiki.d
drwxrwxrwx   12 pmichaud pmichaud     1024 Feb 10 11:51 .
drwxrwxr-x    8 apache   apache       1024 Jan 23 11:58 uploads
drwxrwxr-x    2 apache   apache      54272 Feb 10 15:29 wiki.d    
$ chmod 755 .
$ ls -ld . uploads wiki.d
drwxr-xr-x   12 pmichaud pmichaud     1024 Feb 10 11:51 .
drwxrwsr-x    8 apache   pmichaud     1024 Jan 23 11:58 uploads       
drwxrwsr-x    2 apache   pmichaud    54272 Feb 10 15:29 wiki.d         
</pre>
</div><p class='vspace'></p><p>Now the two directories are owned by apache and we don't have world-writable permissions on them, but pmichaud still has write permissions to the files and directories by virtue of the group ownership and permissions.  The setgid bit also ensures that any files or subdirectories created within uploads/ or wiki.d/ will belong to the same (pmichaud) group.
</p><p class='vspace'></p>
<p>HOWEVER, if a site is running in PHP's "safe_mode", then the "let PmWiki create the directories" solution doesn't work, as PHP will only create files in directories that are owned by the same user that owns the pmwiki.php script itself.  Thus, PmWiki (apache) cannot create the directories in this case, or safe_mode will complain when PmWiki attempts to write a file into those directories. The *only* way for things to work in safe_mode is to manually create the needed directories and set their permissions to 777, as outlined at the beginning of this section.
</p><p class='vspace'></p>
<p>And for those select webservers/PHP installations that are configured such that the PmWiki script runs with the same identity as the account holder, then everything "just works" without doing anything manually.  PmWiki creates any directories as needed (each owned by the account holder), and permissions aren't generally an issue at all.
</p><p class='vspace'></p>
<p>Okay, now let's look at cookbook scripts.  If a cookbook script has files that it wants to make available to browsers, such files should generally be placed somewhere within the 'pub/' hierarchy and referenced via '<a class='varlink' href='http://kozgun.net/wiki/pmwiki.php?n=PmWiki.PathVariables#PubDirUrl'><code class='varlink'>&#36;PubDirUrl</code></a>'.         
</p><p class='vspace'></p>
<p>If a cookbook recipe needs to *write* files to disk, then the same rules apply to that directory as for the wiki.d/ and uploads/ directories above, with the exact ownerships and permissions depending on the webserver and PHP configuration.  In general the cookbook recipe should do the same as PmWiki, and just call PmWiki's mkdirp($dir) function.  PmWiki will then take care of creating the directory (if it can) or prompting for its creation as appropriate.
</p><p class='vspace'></p>
<p>For example, if cookbook recipe 'frobot' wants to distribute a .css file, then that file should go somewhere like pub/css/frobot.css or pub/frobot/frobot.css.  The directories and files in this case should be created and owned by the account owner, since the cookbook recipe doesn't need to create or modify any of the files when it runs.           
</p><p class='vspace'></p>
<p>As an alternate example, the <a class='urllink' href='http://www.pmwiki.org/wiki/Cookbook/MimeTeX' rel='nofollow'>Cookbook:MimeTeX</a> recipe wants to be able to create cached images for the math markup, and those images need to be available to the browser.  Thus, MimeTeX uses a pub/cache/ directory, which should be created in whatever manner was used to create the wiki.d/ and uploads/ directories (i.e., according to the webserver and PHP configuration).  Again, <a class='urllink' href='http://www.pmwiki.org/wiki/Cookbook/MimeTeX' rel='nofollow'>Cookbook:MimeTeX</a> just solves this by calling mkdirp("pub/cache"), and letting that function create the directory or prompt the administrator for the appropriate action based upon the server settings encountered.
</p>
</div>

      </td>
    </tr></table>
<!--PageFooterFmt-->
  <div id='wikifoot'>
    <div class='footnav'>
      <a href='http://kozgun.net/wiki/pmwiki.php?n=PmWiki.FilePermissions?action=edit'>Edit</a> -
      <a href='http://kozgun.net/wiki/pmwiki.php?n=PmWiki.FilePermissions?action=diff'>History</a> -
      <a href='http://kozgun.net/wiki/pmwiki.php?n=PmWiki.FilePermissions?action=print' target='_blank'>Print</a> -
      <a href='http://kozgun.net/wiki/pmwiki.php?n=PmWiki.RecentChanges'>Recent Changes</a> -
      <a href='http://kozgun.net/wiki/pmwiki.php?n=Site.Search'>Search</a></div>
    <div class='lastmod'>Page last modified on September 01, 2005, at 05:08 AM</div></div>
<!--/PageFooterFmt-->
</body>

<!-- Mirrored from kozgun.net/wiki/pmwiki.php?n=PmWiki.FilePermissions by HTTrack Website Copier/3.x [XR&CO'2010], Sat, 26 Jan 2013 19:19:13 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=iso-8859-1" /><!-- /Added by HTTrack -->

<!-- Mirrored from kozgun.net/wiki/pmwiki9df9.html?n=PmWiki.FilePermissions by HTTrack Website Copier/3.x [XR&CO'2013], Fri, 27 Jun 2014 19:52:08 GMT -->
</html>
