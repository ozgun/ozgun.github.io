<!DOCTYPE html 
    PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>

<!-- Mirrored from kozgun.net/wiki/pmwiki.php?n=PmWiki.CustomMarkup by HTTrack Website Copier/3.x [XR&CO'2010], Sat, 26 Jan 2013 19:19:13 GMT -->
<!-- Added by HTTrack -->
<!-- Mirrored from kozgun.net/wiki/pmwiki91a0.html?n=PmWiki.CustomMarkup by HTTrack Website Copier/3.x [XR&CO'2013], Fri, 27 Jun 2014 19:52:08 GMT -->
<meta http-equiv="content-type" content="text/html;charset=iso-8859-1" /><!-- /Added by HTTrack -->
<head>
  <title>Wiki | PmWiki / CustomMarkup </title>
  <meta http-equiv='Content-Style-Type' content='text/css' />
  <link rel='stylesheet' href='pub/skins/pmwiki/pmwiki.css' type='text/css' />
	<script src="http://www.google-analytics.com/urchin.js" type="text/javascript">
	</script>
	<script type="text/javascript">
		_uacct = "UA-884922-1";
		urchinTracker();
	</script>

  <!--HeaderText--><style type='text/css'><!--
  ul, ol, pre, dl, p { margin-top:0px; margin-bottom:0px; }
  code { white-space: nowrap; }
  .vspace { margin-top:1.33em; }
  .indent { margin-left:40px; }
  .outdent { margin-left:40px; text-indent:-40px; }
  a.createlinktext { text-decoration:none; border-bottom:1px dotted gray; }
  a.createlink { text-decoration:none; position:relative; top:-0.5em;
    font-weight:bold; font-size:smaller; border-bottom:none; }
  img { border:0px; }
  
div.sourceblock {
	padding: 0.5em;
	border: 1px solid #808080;
	background-color: #F1F0ED; }
div.sourceblock div {
	font-family: monospace;
	font-size: small;
	line-height: 1; }
div.sourceblock div.head, div.sourceblock div.foot {
	font: italic medium serif;
	padding: 0.5em;
}
div.codeblock {
	padding: 0.5em;
	border: 1px solid #808080;
	background-color: #F1F0ED; }
div.codeblock pre {
	font-family: monospace;
	font-size: small;
	line-height: 1; }.editconflict { color:green; font-style:italic; 
  margin-top:1.33em; margin-bottom:1.33em; }

  table.markup { border: 2px dotted #ccf; width:90%; }
  td.markup1, td.markup2 { padding-left:10px; padding-right:10px; }
  td.markup1 { border-bottom: 1px solid #ccf; }
  div.faq { margin-left:2em; }
  div.faq p.question { margin: 1em 0 0.75em -2em; font-weight:bold; }
  div.faq hr { margin-left: -2em; }
   
    .frame 
      { border:1px solid #cccccc; padding:4px; background-color:#f9f9f9; }
    .lfloat { float:left; margin-right:0.5em; }
    .rfloat { float:right; margin-left:0.5em; }
a.varlink { text-decoration:none; }

--></style>  <meta name='robots' content='noindex,nofollow' />

</head>
<body>
<!--PageHeaderFmt-->
  <div id='wikilogo'><a href='http://kozgun.net/wiki/pmwiki.php'><img src='http://kozgun.net/wiki/pub/skins/pmwiki/sopar100.jpg'
    alt='Wiki' border='0' /></a></div>
  <div id='wikihead'>
	<!-- <span align=center style="position: relative; top:0px; left:-400px;"> -->
<!-- SiteSearch Google -->
<!--
<form method="get" action="http://www.google.com.tr/custom" target="_top">
<table border="0">
<tr><td nowrap="nowrap" valign="top" align="left" height="32">
<a href="http://www.google.com/">
<img src="http://www.google.com/logos/Logo_25wht.gif" border="0" alt="Google" align="middle"></img></a>
</td>
<td nowrap="nowrap">
<input type="hidden" name="domains" value="linoz.blogspot.com;www.kozgun.net"></input>
<input type="text" name="q" size="20" maxlength="255" value=""></input>
<input type="submit" name="sa" value="Search"></input>
</td></tr>
<tr>
<td nowrap="nowrap" colspan=2>
<table>
<tr>
<td>
<input type="radio" name="sitesearch" value="" checked="checked"></input>
<font size="-1" color="#000000">Web</font>
<input type="radio" name="sitesearch" value="linoz.blogspot.com"></input>
<font size="-1" color="#000000">linoz.blogspot.com</font>
<input type="radio" name="sitesearch" value="www.kozgun.net"></input>
<font size="-1" color="#000000">www.kozgun.net</font>
</td>
  <td></td>
</tr>
</table>
<input type="hidden" name="client" value="pub-0891912819256381"></input>
<input type="hidden" name="forid" value="1"></input>
<input type="hidden" name="ie" value="ISO-8859-9"></input>
<input type="hidden" name="oe" value="ISO-8859-9"></input>
<input type="hidden" name="cof" value="GALT:#008000;GL:1;DIV:#336699;VLC:663399;AH:center;BGC:FFFFFF;LBGC:336699;ALC:0000FF;LC:0000FF;T:000000;GFNT:0000FF;GIMP:0000FF;FORID:1"></input>
<input type="hidden" name="hl" value="en"></input>
</td></tr></table>
</form>
-->
<!-- SiteSearch Google -->
	<!-- </span> -->

	<span style="position: relative; top:0px; left:0px;">
  <form action='http://kozgun.net/wiki/pmwiki.php'>
    <a href='http://kozgun.net/wiki/pmwiki.php?n=PmWiki.RecentChanges'
      accesskey='c'>Recent Changes</a> -
    <input type='hidden' name='n' value='PmWiki.CustomMarkup' />
    <input type='hidden' name='action' value='search' />
    <a href='http://kozgun.net/wiki/pmwiki.php?n=Site.Search'>Search</a>:
    <input class='searchbox' type='text' name='q' value='' />
    <input class='searchbutton' type='submit' value='Go' /></form></div>
		</span>

<!--/PageHeaderFmt-->
  <table id='wikimid' width='100%' cellspacing='0' cellpadding='0'><tr>
<!--PageLeftFmt-->
      <td id='wikileft' valign='top'>
        <ul><li><a class='wikilink' href='http://kozgun.net/wiki/pmwiki.php?n=BirlerVeSifirlar.HomePage'>Birler ve S&#305;f&#305;rlar</a>
</li><li><a class='wikilink' href='http://kozgun.net/wiki/pmwiki.php?n=Radio.HomePage'>Radyo</a>
</li><li><a class='wikilink' href='http://kozgun.net/wiki/pmwiki.php?n=Bookmarks.Index'>Ba&#287;lant&#305;lar</a>
</li><li><a class='wikilink' href='http://kozgun.net/wiki/pmwiki.php?n=RSS.HomePage'>RSS/Podcasts</a>
</li><li><a class='wikilink' href='http://kozgun.net/wiki/pmwiki.php?n=Main.Index'>Site Haritas&#305;</a>
</li><li><a class='urllink' href='http://linoz.blogspot.com/' rel='nofollow'>linoz.blogspot.com</a>
</li><li><a class='wikilink' href='http://kozgun.net/wiki/pmwiki.php?n=NelerOgrendim.HomePage'>Neler Ö&#287;rendim</a>
</li></ul><p style='text-align: right;' > <span style='font-size:83%'><a class='wikilink' href='http://kozgun.net/wiki/pmwiki.php?n=Site.SideBar?action=edit'>edit SideBar</a></span>
</p>

			<div align="center">
			<br>
			<!-- firefox ve thunderbird -->
			<a href="http://www.spreadfirefox.com/?q=affiliates&amp;id=0&amp;t=209"><img border="0" alt="Firefox 2" title="Firefox 2" src="http://sfx-images.mozilla.org/affiliates/Buttons/firefox2/firefox-spread-btn-1.png"/></a> 
			<br>
<a href="http://www.spreadfirefox.com/?q=affiliates&amp;id=0&amp;t=181"><img border="0" alt="Get Thunderbird!" title="Get Thunderbird!" src="http://sfx-images.mozilla.org/affiliates/thunderbird/thunderbird_small.png"/></a>


<br><br>
				<script type="text/javascript"><!--
				/*
google_ad_client = "pub-0891912819256381";
google_ad_width = 120;
google_ad_height = 600;
google_ad_format = "120x600_as";
google_ad_type = "text_image";
google_ad_channel = "";
*/
//-->
</script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>

</div>
				</td>
<!--/PageLeftFmt-->
      <td id='wikibody' valign='top'>
        <!-- <div id='wikicmds'><ul><li class='browse' ><a accesskey='ak_view'  class='selflink' href='http://kozgun.net/wiki/pmwiki.php?n=PmWiki.CustomMarkup'>View</a>
</li><li class='edit' ><a accesskey='e'  class='wikilink' href='http://kozgun.net/wiki/pmwiki.php?n=PmWiki.CustomMarkup?action=edit'>Edit</a>
</li><li class='diff' ><a accesskey='h'  class='wikilink' href='http://kozgun.net/wiki/pmwiki.php?n=PmWiki.CustomMarkup?action=diff'>History</a>
</li><li class='print' ><a accesskey='ak_print'  class='wikilink' href='http://kozgun.net/wiki/pmwiki.php?n=PmWiki.CustomMarkup?action=print'>Print</a>
</li></ul>
</div>-->
<!--PageTitleFmt-->
        <div id='wikititle'>
          <div class='pagegroup'><a href='http://kozgun.net/wiki/pmwiki.php?n=PmWiki'>PmWiki</a> /</div>
          <h1 class='pagetitle'>CustomMarkup</h1></div>
<!--PageText-->
<div id='wikitext'>
<p>
<span class='frame rfloat' style='font-size: smaller; background-color: #ffffcc;' > administrators (intermediate)</span>
</p><h2>Introduction</h2>
<p class='vspace'></p><p><a class='wikilink' href='http://kozgun.net/wiki/pmwiki.php?n=PmWiki.PmWiki'>PmWiki</a>'s markup translation engine is handled by a set of rules; each rule searches for a specific pattern in the markup text and replaces it with some replacement text.  Internally, this is accomplished by using PHP's "<a class='urllink' href='http://www.php.net/preg_replace' rel='nofollow'>preg_replace</a>" function.
</p><p class='vspace'></p>
<p>Rules are added to the translation engine via PmWiki's Markup() function, which looks like
</p><p class='vspace'></p>
<div class='indent'><code>Markup($name, $when, $pattern, $replace);</code>
</div><p class='vspace'></p><p>where <code>$name</code> is a unique name (a string) given to the rule, <code>$when</code> says when the rule should be applied relative to other rules, <code>$pattern</code> is the pattern to be searched for in the markup text, and <code>$replace</code> is what the pattern should be replaced with.
</p><p class='vspace'></p>
<p>For example, here's the code that creates the rule for <code>''emphasized text''</code> (in <em>scripts/stdmarkup.php</em>):
</p><p class='vspace'></p>
<div class='indent'><code>Markup("em", "inline", "/''(.*?)''/", "&lt;em&gt;$1&lt;/em&gt;");</code>
</div><p class='vspace'></p><p>Basically this statement says to create a rule called "em" to be performed with the other "inline" markups, and the rule replaces any text inside two pairs of single quotes with the same text ($1) surrounded by <code>&lt;em&gt;</code> and <code>&lt;/em&gt;</code>.
</p><p class='vspace'></p>
<p>The first two parameters to Markup() are used to specify the sequence in which rules should be applied.  The first parameter provides a name for a rule -- "<code>em</code>" in the example above.  We could've chosen other names such as "<code>''</code>", or even "<code>twosinglequotes</code>".  In general PmWiki uses the markup itself to name the rule (i.e., PmWiki uses "<code>''</code>" instead of "<code>em</code>"), but to keep this example easier to read later on we'll use a mnemonic name for now.
</p><p class='vspace'></p>
<p>The second parameter says that this rule is to be done along with the other "inline" markups.  PmWiki divides the translation process into a number of phases:
</p><p class='vspace'></p>
<div class='indent'><pre>
_begin      start of translation
fulltext    translations to be performed on the full text            
split       conversion of the full markup text into lines to be processed
directives  directive processing
inline      inline markups
links       conversion of [[links]], url-links, and WikiWords     
block       block markups
style       style handling       
_end        end of translation
</pre>
</div><p class='vspace'></p><p>Thus, specifying "inline" for the second parameter says that this rule should be applied when the other "inline" rules are being performed.  If we want a rule to be performed with the directives -- i.e., before inline rules are processed, we would specify "directives" for the second parameter.
</p><p class='vspace'></p>
<p>The third parameter is a Perl-compatible regular expression. Basically, it is a slash, a <a class='urllink' href='http://www.php.net/manual/en/reference.pcre.pattern.syntax.php' rel='nofollow'>regular expression</a>, another slash, and (optionally) a set of <a class='urllink' href='http://www.php.net/manual/en/reference.pcre.pattern.modifiers.php' rel='nofollow'>options ("modifiers")</a>.
</p><p class='vspace'></p>
<p>The example uses the pattern string <code>"/''(.*?)''/"</code>, which uses <code>''(.*)''</code> as the regular expression and no options. (The regular expression says "find two single quotes in succession, then as few arbitrary characters as are needed to make the match find something, then two additional single quotes in succession"; the parentheses "capture" a part of the wikitext for later use.)
</p><p class='vspace'></p>
<p>The fourth parameter is the replacement text that should be inserted instead of the marked-up wikitext. You can use <code>$1</code>, <code>$2</code>, etc. to insert the text from the first, second etc. parenthesised part of the regular expression.
</p><p class='vspace'></p>
<p>In the example, we have <code>"&lt;em&gt;$1&lt;/em&gt;"</code>, which is an <code>&lt;em&gt;</code>, the text matched by the first parentheses (i.e. by the <code>.*?</code> section of the pattern), and <code>&lt;/em&gt;</code>.
</p><p class='vspace'></p>
<h3>Examples</h3>
<p class='vspace'></p><p>Here's a rule for <code>@@monospaced@@</code> text:
</p><p class='vspace'></p>
<div class='indent'><code>Markup("@@", "inline", "/@@(.*?)@@/", "&lt;code&gt;$1&lt;/code&gt;");</code>
</div><p class='vspace'></p><p>and for a <code>[:comment ...:]</code> directive that is simply removed from the output:
</p><p class='vspace'></p>
<div class='indent'><code>Markup("comment", "directives", "/\\(:comment .*?:\\)/", '');</code>
</div><p class='vspace'></p><p>Okay, now how about the rule for <code>'''strong emphasis'''</code>?  We have to be a bit careful here, because although this translation should be performed along with other inline markup, we also have to make sure that the rule for <code>'''</code> is handled <em>before</em> the rule for <code>''</code>, because <code>'''</code> also contains <code>''</code>. The second parameter to Markup() can be used to specify the new rule's relationship to any other rule:
</p><p class='vspace'></p>
<div class='indent'><code>Markup("strong", "&lt;em", "/'''(.*?)'''/", "&lt;strong&gt;$1&lt;/strong&gt;");</code>
</div><p class='vspace'></p><p>This creates a rule called "strong", and the second parameter "&lt;em" says to be sure that this rule is processed before the "em" rule we defined above.  If we wanted to do something after the "em" rule, we would use "&gt;em" instead.  Thus, it's possible to add rules at any point in PmWiki's markup translation process in an extensible manner.  (In fact, the "inline", "block", "directives", etc., phases above are just placeholder rules used to provide an overall sequence for other rules.  Thus one can use "&lt;inline" to specify rules that should be handled before any
other inline rules.)             
</p><p class='vspace'></p>
<p>If you want to disable available markup just call e.g.:
</p><p class='vspace'></p>
<div class='indent'><code>Markup("strong", "&lt;em");</code>
</div><p class='vspace'></p><p>The lack of a pattern &amp; replacement parameters indicates that you simply wish to disable the markup.
</p><p class='vspace'></p>
<p>PmWiki's default markup rules are defined in the <em>scripts/stdmarkup.php</em> file.  To see the entire translation table as the program is running, the scripts/diag.php module adds "<code>?action=ruleset</code>", which displays the set of defined markup rules in the sequence in which they will be processed.  You can see it at <a class='wikilink' href='http://kozgun.net/wiki/pmwiki.php?n=PmWiki.CustomMarkup?action=ruleset'>CustomMarkup?action=ruleset</a>.
</p><p class='vspace'></p>
<p class='vspace'></p><h2>More examples</h2>
<p class='vspace'></p><h3>Call a user function which returns some content</h3>
<p class='vspace'></p><p>An 'e' option on the <code>$pattern</code> parameter will make PmWiki interpret the <code>$replace</code> parameter not as a replacement text, but as a PHP expression that returns the replacement text.
</p><p class='vspace'></p>
<p>The markup (:meeting:) uses this by calling a hypothetical global function meeting() (say, defined in <code>config.php</code>), which is supposed to return the date of the next BLUG Meeting as a string:
</p><p class='vspace'></p>
<div class='indent'><code>Markup('meeting', 'directives', '/\\(:meeting:\\)/e', 'meeting()');</code>
</div><p class='vspace'></p><p>Note also, that the 'e' option is a standard <code>preg_replace()</code> option - and it still allows for 'references substitution' (that is, the parentheses in the <code>$pattern</code> are caught and inserted where <code>$1</code>, <code>$2</code>... etc. are). <span style='font-size:83%'><em>That might help you also in solving the excercise left below ;)</em></span>
</p><p class='vspace'></p>
<p class='vspace'></p><h3>Simple macro replacement:</h3>
<p class='vspace'></p><div class='indent'><pre>
Markup('bigP', 'fulltext', '/\{bigP\}/',
  '%font-size="40px"% P' .
  '%block font-size="15px" border="0px" ' .
  'padding="4px 14px 7px 14px" bgcolor=#FFB% ');
</pre>
</div><p class='vspace'></p><p>This uses the fulltext phase to simply replace the <code>{bigP}</code> sequence with a bunch of random markup, so that
</p><p class='vspace'></p>
<pre> {bigP}ie Jesu Domine, dona eis requiem (''whack'').
</pre><p class='vspace'></p><p>produces this effect:
</p><p class='vspace'></p>
<p style='font-size: 15px; border: 0px; padding: 4px 14px 7px 14px; background-color: #FFB;' ><span style='font-size: 40px;' > P</span> ie Jesu Domine, dona eis requiem (<em>whack</em>).
</p><p class='vspace'></p>
<p>Adding an argument (as in <code>{big P}</code>, here) to a macro is left as an exercise for the reader.
</p><p class='vspace'></p>
<p class='vspace'></p><h3>Add Google Search to your wiki<a name='googlesearch' id='googlesearch'></a></h3>
<p class='vspace'></p><p><strong>German Example, Same Window</strong>
</p><p class='vspace'></p>
<p>Put this text at the bottom of your config.php file
</p><p class='vspace'></p>
<div class='indent'><pre>
Markup('googlesearch', 'directives', '/\\(:googlesearch:\\)/e',"Keep(\"
&lt;FORM method=GET action='http://www.google.de/search'&gt;
&lt;TABLE&gt;&lt;tr&gt;&lt;td&gt;
&lt;A HREF='http://www.google.de'&gt;
&lt;IMG SRC='http://www.google.de/logos/Logo_40wht.gif' border='0'
ALT='Google' align='absmiddle'&gt;&lt;/A&gt;
&lt;INPUT TYPE=text name=q size=20 maxlength=255 value=''&gt;
&lt;INPUT TYPE=hidden name=hl value=de&gt;
&lt;INPUT type=submit name=btnG VALUE='Google Search'&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/TABLE&gt;
&lt;/FORM&gt;
\")");
</pre>
</div><p class='vspace'></p><p>Put (:googlesearch:) anywhere on your Page. --newmy
</p><p class='vspace'></p>
<p class='vspace'></p><h3>Add Google Safe Search in a New Window to your wiki<a name='googlesearch' id='googlesearch'></a></h3>
<p class='vspace'></p><p><strong>English Example, Safe Search in a New Window</strong>
</p><p class='vspace'></p>
<p>Put this text at the bottom of your config.php file
</p><p class='vspace'></p>
<div class='indent'><pre>
Markup('googlesearch', 'directives', '/\\(:googlesearch:\\)/e',"Keep(\"
&lt;FORM method=GET action='http://www.google.com/search' target='_blank'&gt;
&lt;TABLE&gt;&lt;tr&gt;&lt;td&gt;
Google Safe Search
&lt;A HREF='http://www.google.com/search?safe=vss'&gt;&lt;/A&gt;
&lt;INPUT TYPE=text name=q size=42 maxlength=255 value=''&gt;
&lt;INPUT type=hidden name=safe value=strict&gt;
&lt;INPUT type=submit name=sa value='Google Search'&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/TABLE&gt;
&lt;/FORM&gt;
\")");
</pre>
</div><p class='vspace'></p><p>Now you can put (:googlesearch:) anywhere on your Page. --Jeff, Corpus Christi, Texas
</p><p class='vspace'></p>
<p><strong>Add Local Weather to your site</strong>
</p><p class='vspace'></p>
<p>Put this text at the bottom of your config.php file
</p><p class='vspace'></p>
<div class='indent'><pre>
Markup('localweather', 'directives', '/\\(:localweather:\\)/e',"Keep(\"
&lt;script src='http://voap.weather.com/weather/oap/78410?template=GENXV&amp;par=null&amp;unit=0&amp;key=021c5b063db71b7fdd9a11f5ec88c033'&gt;&lt;/script&gt;
\")");
</pre>
</div><p class='vspace'></p><p>Now you can put (:localweather:) anywhere on your Page. --Jeff, Corpus Christi, Texas
</p><p class='vspace'></p>
<p>Note: You will need to go to <a class='urllink' href='http://www.weather.com/' rel='nofollow'>http://www.weather.com</a> to get the script line to replace the script line above.
</p><p class='vspace'></p>
Just place your script between:<pre>
Markup('localweather', 'directives', '/\\(:localweather:\\)/e',"Keep(\"
</pre>
<p class='vspace'></p><p>and
</p><p class='vspace'></p><pre>
\")");
</pre>
<p class='vspace'></p><p style='background-color: #eee;' ><span class='wikitrail'>&lt;&lt; <a class='wikilink' href='http://kozgun.net/wiki/pmwiki.php?n=PmWiki.CustomInterMap'>Custom InterMap</a> | <a class='wikilink' href='http://kozgun.net/wiki/pmwiki.php?n=PmWiki.DocumentationIndex'>DocumentationIndex</a> | <a class='wikilink' href='http://kozgun.net/wiki/pmwiki.php?n=PmWiki.CustomWikiStyles'>Custom WikiStyles</a> &gt;&gt;</span>
</p>
</div>

      </td>
    </tr></table>
<!--PageFooterFmt-->
  <div id='wikifoot'>
    <div class='footnav'>
      <a href='http://kozgun.net/wiki/pmwiki.php?n=PmWiki.CustomMarkup?action=edit'>Edit</a> -
      <a href='http://kozgun.net/wiki/pmwiki.php?n=PmWiki.CustomMarkup?action=diff'>History</a> -
      <a href='http://kozgun.net/wiki/pmwiki.php?n=PmWiki.CustomMarkup?action=print' target='_blank'>Print</a> -
      <a href='http://kozgun.net/wiki/pmwiki.php?n=PmWiki.RecentChanges'>Recent Changes</a> -
      <a href='http://kozgun.net/wiki/pmwiki.php?n=Site.Search'>Search</a></div>
    <div class='lastmod'>Page last modified on September 01, 2005, at 10:55 PM</div></div>
<!--/PageFooterFmt-->
</body>

<!-- Mirrored from kozgun.net/wiki/pmwiki.php?n=PmWiki.CustomMarkup by HTTrack Website Copier/3.x [XR&CO'2010], Sat, 26 Jan 2013 19:19:13 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=iso-8859-1" /><!-- /Added by HTTrack -->

<!-- Mirrored from kozgun.net/wiki/pmwiki91a0.html?n=PmWiki.CustomMarkup by HTTrack Website Copier/3.x [XR&CO'2013], Fri, 27 Jun 2014 19:52:08 GMT -->
</html>
